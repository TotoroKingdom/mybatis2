<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.sdju.mapper.ArticleMapper">

    <select id="getArticleById" resultType="org.sdju.model.Article">
        select a.*
        ,au.id as "author.id"
        ,au.name as "author.name"
        ,au.age as "author.age"
        from article a,author au
        where a.aid=au.id;
    </select>

    <resultMap id="ArticleMap" type="org.sdju.model.Article">
        <id property="id" column="id"></id>
        <result property="title" column="title"></result>
        <result property="content" column="content"></result>
        <result property="author.id" column="author_id"></result>
        <result property="author.name" column="author_name"></result>
        <result property="author.age" column="author_age"></result>
    </resultMap>

    <select id="getArticleById2" resultMap="ArticleMap">
        select a.*
            ,au.id as author_id
            ,au.name as author_name
            ,au.age as author_age
            from article a, author au
            where a.aid = au.id
    </select>

    <resultMap id="ArticleMap2" type="org.sdju.model.Article">
        <id property="id" column="id"></id>
        <result property="title" column="title"></result>
        <result property="content" column="content"></result>
        <association property="author" javaType="org.sdju.model.Author" columnPrefix="author_">
            <id property="id" column="id"></id>
            <result property="name" column="name"></result>
            <result property="age" column="age"></result>
        </association>
    </resultMap>

    <select id="getArticleById3" resultMap="ArticleMap2">
        select a.*
            ,au.id as author_id
            ,au.name as author_name
            ,au.age as author_age
            from article a, author au
            where a.aid = au.id
    </select>


</mapper>
